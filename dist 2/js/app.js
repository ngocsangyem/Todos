(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var todo_service_1 = require("./service/todo.service");

var TodoList =
/** @class */
function () {
  function TodoList(todos) {
    this.todoService = new todo_service_1.TodoService(todos);
  } // todoToggleState(todo: Todo){
  // 	this.todoService.toggleState(todo);
  // }


  TodoList.prototype.todoCountTask = function (countElement) {
    return this.todoService.countTask(countElement);
  };

  TodoList.prototype.todoAddTask = function (input) {
    this.todoService.render(input);
  };

  TodoList.prototype.todoInit = function () {
    var _this = this;

    var todoInput = document.getElementById('todoInput');
    var todoFooter = document.querySelector('.td__footer');
    var todoCount = document.querySelector('.td__header-count');
    var todoToggle = document.getElementsByClassName('td__body-task');
    todoInput.addEventListener('keypress', function (event) {
      if (event.key === 'Enter') {
        _this.todoAddTask(todoInput.value);

        todoInput.value = '';
        todoFooter.style.display = 'flex';
        todoCount.innerHTML = _this.todoCountTask(todoCount);
      }
    }); // document.addEventListener('click', event => {
    // 	if ((<HTMLElement>event.target).classList.contains('td__body-task')) {
    // 		console.log(123);
    // 		this.todoToggleState();
    // 	}
    // }, false)
  };

  return TodoList;
}();

var todoApp = new TodoList([]);
todoApp.todoInit();

},{"./service/todo.service":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var state = false;

var TodoService =
/** @class */
function () {
  function TodoService(todos) {
    // state: boolean = false;
    this.id = 0;
    this.todos = [];
  }

  TodoService.prototype.generateId = function (length) {
    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHUJKLMNOPQRSTUVWXYZ';
    var ID = '';

    for (var i = 0; i < length; i += 1) {
      ID += chars.charAt(Math.floor(Math.random() * chars.length));
    }

    return 'task-' + ID;
  };

  TodoService.prototype.addTask = function (task) {
    var todo = {
      id: this.generateId(4),
      name: task,
      state: false
    };
    this.todos.push(todo);
    console.log(this.todos);
    return todo;
  };

  TodoService.prototype.renderTodo = function (task) {
    var container = document.getElementById('bodyTasks');
    var html, newHtml, htmlDom;
    html = "<li class=\"td__body-task" + (task.state === true ? ' td__body-task--complete' : '') + "\" data-id=\"" + task.id + "\" data-state=\"" + (task.state === true ? 'complete' : 'active') + "\">\n\t\t\t\t\t<input class=\"td__body-task--toggle\" type=\"checkbox\">\n\t\t\t\t\t<span>" + task.name + "</span>\n\t\t\t\t\t<button class=\"td__body-task--destroy\" data-id=\"" + task.id + "\"><i class=\"mdi mdi-window-close\"></i></button>\n\t\t\t\t</li>";
    container.insertAdjacentHTML("beforeend", html);
  };

  TodoService.prototype.render = function (input) {
    var _this = this;

    var newItem;
    newItem = this.addTask(input);
    this.renderTodo(newItem);
    var findId = document.querySelector("[data-id=\"" + newItem.id + "\"]");
    console.log(findId);

    if (findId) {
      findId.addEventListener('click', function (event) {
        _this.toggleState(newItem);

        findId.remove();

        _this.renderTodo(newItem);

        console.log(findId);
      });
    }
  };

  TodoService.prototype.clearCompleteTask = function () {
    this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.allTask = function () {
    return this.todos.slice();
  };

  TodoService.prototype.activeTask = function () {
    return this.todos = this.todos.filter(function (todo) {
      return todo.state === false;
    });
  };

  TodoService.prototype.completeTask = function () {
    return this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.countTask = function (countElement) {
    if (this.todos.length > 0) {
      countElement.style.display = 'block';
    } else {
      countElement.style.display = 'none';
    }

    return String(this.todos.length);
  };

  TodoService.prototype.renderAfterClick = function (todo, container) {
    for (todo in this.todos) {
      if (this.todos.hasOwnProperty(todo)) {
        var element = this.todos[todo];

        if (element.id) {
          container.insertAdjacentHTML('beforeend', this.renderTodo(element));
        }
      }
    }
  };

  TodoService.prototype.toggleState = function (todo) {
    todo.state = !todo.state;
    return todo.state;
  };

  TodoService.prototype.destroyTask = function () {};

  return TodoService;
}();

exports.TodoService = TodoService;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwL3R5cGVzY3JpcHQvYXBwLnRzIiwic3JjL2FwcC90eXBlc2NyaXB0L3NlcnZpY2UvdG9kby5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDRUEsSUFBQSxjQUFBLEdBQUEsT0FBQSxDQUFBLHdCQUFBLENBQUE7O0FBRUEsSUFBQSxRQUFBO0FBQUE7QUFBQSxZQUFBO0FBS0MsV0FBQSxRQUFBLENBQVksS0FBWixFQUF5QjtBQUN4QixTQUFLLFdBQUwsR0FBbUIsSUFBSSxjQUFBLENBQUEsV0FBSixDQUFnQixLQUFoQixDQUFuQjtBQUNBLEdBUEYsQ0FTQztBQUNBO0FBQ0E7OztBQUVBLEVBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxhQUFBLEdBQUEsVUFBYyxZQUFkLEVBQXVDO0FBQ3RDLFdBQU8sS0FBSyxXQUFMLENBQWlCLFNBQWpCLENBQTJCLFlBQTNCLENBQVA7QUFDQSxHQUZEOztBQUlBLEVBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxXQUFBLEdBQUEsVUFBWSxLQUFaLEVBQXlCO0FBQ3hCLFNBQUssV0FBTCxDQUFpQixNQUFqQixDQUF3QixLQUF4QjtBQUNBLEdBRkQ7O0FBSUEsRUFBQSxRQUFBLENBQUEsU0FBQSxDQUFBLFFBQUEsR0FBQSxZQUFBO0FBQUEsUUFBQSxLQUFBLEdBQUEsSUFBQTs7QUFDQyxRQUFJLFNBQVMsR0FBcUIsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsV0FBeEIsQ0FBbEM7QUFDQSxRQUFJLFVBQVUsR0FBZ0IsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsYUFBdkIsQ0FBOUI7QUFDQSxRQUFJLFNBQVMsR0FBZ0IsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsbUJBQXZCLENBQTdCO0FBQ0EsUUFBSSxVQUFVLEdBQUcsUUFBUSxDQUFDLHNCQUFULENBQWdDLGVBQWhDLENBQWpCO0FBRUEsSUFBQSxTQUFTLENBQUMsZ0JBQVYs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QSxFQUFBLFdBQUEsQ0FBQSxTQUFBLENBQUEsV0FBQSxHQUFBLFlBQUEsQ0FBZ0IsQ0FBaEI7O0FBQ0QsU0FBQSxXQUFBO0FBQUMsQ0F0R0QsRUFBQTs7QUFBYSxPQUFBLENBQUEsV0FBQSxHQUFBLFdBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSAnLi9tb2RlbC90b2RvLm1vZGVsJztcbmltcG9ydCB7IFRvZG9TdGF0ZSB9IGZyb20gJy4vaW50ZXJmYWNlL3RvZG8uaW50ZXJmYWNlJztcbmltcG9ydCB7IFRvZG9TZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL3RvZG8uc2VydmljZSc7XG5cbmNsYXNzIFRvZG9MaXN0IHtcblx0XG5cdHByaXZhdGUgdG9kb1NlcnZpY2U6IFRvZG9TZXJ2aWNlO1xuXG5cdFxuXHRjb25zdHJ1Y3Rvcih0b2RvczogVG9kb1tdKSB7XG5cdFx0dGhpcy50b2RvU2VydmljZSA9IG5ldyBUb2RvU2VydmljZSh0b2Rvcyk7XG5cdH1cblxuXHQvLyB0b2RvVG9nZ2xlU3RhdGUodG9kbzogVG9kbyl7XG5cdC8vIFx0dGhpcy50b2RvU2VydmljZS50b2dnbGVTdGF0ZSh0b2RvKTtcblx0Ly8gfVxuXG5cdHRvZG9Db3VudFRhc2soY291bnRFbGVtZW50OiBIVE1MRWxlbWVudCk6IHN0cmluZ3tcblx0XHRyZXR1cm4gdGhpcy50b2RvU2VydmljZS5jb3VudFRhc2soY291bnRFbGVtZW50KTtcblx0fVxuXG5cdHRvZG9BZGRUYXNrKGlucHV0OiBzdHJpbmcpe1xuXHRcdHRoaXMudG9kb1NlcnZpY2UucmVuZGVyKGlucHV0KTtcblx0fVxuXG5cdHRvZG9Jbml0KCl7XG5cdFx0bGV0IHRvZG9JbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvSW5wdXQnKTtcblx0XHRsZXQgdG9kb0Zvb3RlciA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGRfX2Zvb3RlcicpO1xuXHRcdGxldCB0b2RvQ291bnQgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRkX19oZWFkZXItY291bnQnKTtcblx0XHRsZXQgdG9kb1RvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RkX19ib2R5LXRhc2snKTtcblxuXHRcdHRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChldmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHR0aGlzLnRvZG9BZGRUYXNrKHRvZG9JbnB1dC52YWx1ZSk7XG5cdFx0XHRcdHRvZG9JbnB1dC52YWx1ZSA9ICcnXG5cdFx0XHRcdHRvZG9Gb290ZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdFx0dG9kb0NvdW50LmlubmVySFRNTCA9IHRoaXMudG9kb0NvdW50VGFzayh0b2RvQ291bnQpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0Ly8gXHRpZiAoKDxIVE1MRWxlbWVudD5ldmVudC50YXJnZXQpLmNsYXNzTGlzdC5jb250YWlucygndGRfX2JvZHktdGFzaycpKSB7XG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKDEyMyk7XG5cdFx0Ly8gXHRcdHRoaXMudG9kb1RvZ2dsZVN0YXRlKCk7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gfSwgZmFsc2UpXG5cdH1cbn1cblxubGV0IHRvZG9BcHAgPSBuZXcgVG9kb0xpc3QoW10pXG5cbnRvZG9BcHAudG9kb0luaXQoKTtcblxuIiwiaW1wb3J0IHsgVG9kbyB9IGZyb20gJy4uL21vZGVsL3RvZG8ubW9kZWwnO1xuaW1wb3J0IHsgVG9kb1N0YXRlIH0gZnJvbSAnLi4vaW50ZXJmYWNlL3RvZG8uaW50ZXJmYWNlJztcbmltcG9ydCB7IFRvZG9TZXJ2aWNlSW50ZXJmYWNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlL3RvZG9zZXJ2aWNlLmludGVyZmFjZSc7XG5cblxubGV0IHN0YXRlID0gZmFsc2U7XG5leHBvcnQgY2xhc3MgVG9kb1NlcnZpY2UgaW1wbGVtZW50cyBUb2RvU2VydmljZUludGVyZmFjZSB7XG5cdC8vIHN0YXRlOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgaWQ6IG51bWJlciA9IDA7XG5cdHByaXZhdGUgdG9kb3M6IFRvZG9bXSA9IFtdO1xuXG5cdGNvbnN0cnVjdG9yKHRvZG9zOiBUb2RvW10pIHtcblx0fVxuXG5cdHByaXZhdGUgZ2VuZXJhdGVJZChsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG5cdFx0Y29uc3QgY2hhcnMgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hVSktMTU5PUFFSU1RVVldYWVonO1xuXHRcdGxldCBJRCA9ICcnO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcblx0XHRcdElEICs9IGNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpKTtcblx0XHR9XG5cdFx0cmV0dXJuICd0YXNrLScgKyBJRDtcblx0fVxuXHRwcml2YXRlIGFkZFRhc2sodGFzazogc3RyaW5nKTogVG9kbyB7XG5cdFx0bGV0IHRvZG86IFRvZG8gPSB7XG5cdFx0XHRpZDogdGhpcy5nZW5lcmF0ZUlkKDQpLFxuXHRcdFx0bmFtZTogdGFzayxcblx0XHRcdHN0YXRlOiBmYWxzZSxcblx0XHR9O1xuXHRcdHRoaXMudG9kb3MucHVzaCh0b2RvKTtcblx0XHRjb25zb2xlLmxvZyh0aGlzLnRvZG9zKTtcblx0XHRcblx0XHRyZXR1cm4gdG9kbztcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyVG9kbyh0YXNrOiB7aWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBzdGF0ZTogYm9vbGVhbn0pOiB2b2lke1xuXHRcdGxldCBjb250YWluZXIgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHlUYXNrcycpO1xuXHRcdGxldCBodG1sOiBzdHJpbmcsIG5ld0h0bWw6IHN0cmluZywgaHRtbERvbTtcblx0XHRodG1sID0gIGA8bGkgY2xhc3M9XCJ0ZF9fYm9keS10YXNrJHt0YXNrLnN0YXRlID09PSB0cnVlID8gJyB0ZF9fYm9keS10YXNrLS1jb21wbGV0ZScgOiAnJyB9XCIgZGF0YS1pZD1cIiR7dGFzay5pZH1cIiBkYXRhLXN0YXRlPVwiJHt0YXNrLnN0YXRlID09PSB0cnVlID8gJ2NvbXBsZXRlJyA6ICdhY3RpdmUnfVwiPlxuXHRcdFx0XHRcdDxpbnB1dCBjbGFzcz1cInRkX19ib2R5LXRhc2stLXRvZ2dsZVwiIHR5cGU9XCJjaGVja2JveFwiPlxuXHRcdFx0XHRcdDxzcGFuPiR7dGFzay5uYW1lfTwvc3Bhbj5cblx0XHRcdFx0XHQ8YnV0dG9uIGNsYXNzPVwidGRfX2JvZHktdGFzay0tZGVzdHJveVwiIGRhdGEtaWQ9XCIke3Rhc2suaWR9XCI+PGkgY2xhc3M9XCJtZGkgbWRpLXdpbmRvdy1jbG9zZVwiPjwvaT48L2J1dHRvbj5cblx0XHRcdFx0PC9saT5gXG5cdFx0XG5cdFx0Y29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBodG1sKTtcblx0fVxuXHRcblx0cmVuZGVyKGlucHV0OiBzdHJpbmcpOiB2b2lke1xuXHRcdGxldCBuZXdJdGVtOiBUb2RvO1xuXHRcdG5ld0l0ZW0gPSB0aGlzLmFkZFRhc2soaW5wdXQpO1xuXHRcdHRoaXMucmVuZGVyVG9kbyhuZXdJdGVtKTtcblx0XHRsZXQgZmluZElkID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHtuZXdJdGVtLmlkfVwiXWApXG5cdFx0Y29uc29sZS5sb2coZmluZElkKTtcblx0XHRcblx0XHRpZiAoZmluZElkKSB7XG5cdFx0XHRmaW5kSWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdHRoaXMudG9nZ2xlU3RhdGUobmV3SXRlbSk7XG5cdFx0XHRcdGZpbmRJZC5yZW1vdmUoKVxuXHRcdFx0XHR0aGlzLnJlbmRlclRvZG8obmV3SXRlbSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGZpbmRJZCk7XG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXHRjbGVhckNvbXBsZXRlVGFzaygpIHtcblx0XHR0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5maWx0ZXIodG9kbyA9PiB0b2RvLnN0YXRlID09PSB0cnVlKTtcblx0fVxuXG5cdGFsbFRhc2soKSB7XG5cdFx0cmV0dXJuIHRoaXMudG9kb3Muc2xpY2UoKTtcblx0fVxuXG5cdGFjdGl2ZVRhc2soKSB7XG5cdFx0cmV0dXJuICh0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5maWx0ZXIoXG5cdFx0XHR0b2RvID0+IHRvZG8uc3RhdGUgPT09IGZhbHNlXG5cdFx0KSk7XG5cdH1cblxuXHRjb21wbGV0ZVRhc2soKSB7XG5cdFx0cmV0dXJuICh0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5maWx0ZXIoXG5cdFx0XHR0b2RvID0+IHRvZG8uc3RhdGUgPT09IHRydWVcblx0XHQpKTtcblx0fVxuXG5cdGNvdW50VGFzayhjb3VudEVsZW1lbnQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHtcblx0XHRpZiAodGhpcy50b2Rvcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb3VudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvdW50RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdH1cblx0XHRyZXR1cm4gU3RyaW5nKHRoaXMudG9kb3MubGVuZ3RoKTtcblx0fVxuXG5cdHJlbmRlckFmdGVyQ2xpY2sgKHRvZG8sIGNvbnRhaW5lcil7XG5cdFx0Zm9yICh0b2RvIGluIHRoaXMudG9kb3MpIHtcblx0XHRcdGlmICh0aGlzLnRvZG9zLmhhc093blByb3BlcnR5KHRvZG8pKSB7XG5cdFx0XHRcdGxldCBlbGVtZW50ID0gdGhpcy50b2Rvc1t0b2RvXTtcblx0XHRcdFx0aWYgKGVsZW1lbnQuaWQpIHtcblx0XHRcdFx0XHRjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0aGlzLnJlbmRlclRvZG8oZWxlbWVudCkpXG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRvZ2dsZVN0YXRlKHRvZG86IFRvZG8pOiBib29sZWFue1xuXHRcdHRvZG8uc3RhdGUgPSAhdG9kby5zdGF0ZVxuXHRcdHJldHVybiB0b2RvLnN0YXRlO1xuXHR9XG5cblx0ZGVzdHJveVRhc2soKSB7fVxufVxuIl19
