(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var todo_service_1 = require("./service/todo.service");

var TodoList =
/** @class */
function () {
  function TodoList(todos) {
    this.todoService = new todo_service_1.TodoService(todos);
  }

  TodoList.prototype.todoCountTask = function () {
    var todoCount = document.querySelector('.td__header-count');
    return todoCount.innerHTML = this.todoService.countTask(todoCount);
  };

  TodoList.prototype.todoAddTask = function (input) {
    this.todoService.render(input);
  };

  TodoList.prototype.todoDeleteTask = function (index) {
    return this.todoService.deleteTask(index);
  };

  TodoList.prototype.todoInit = function () {
    var _this = this;

    var todoInput = document.getElementById('todoInput');
    var todoFooter = document.querySelector('.td__footer');
    var todoTaskWrapper = document.getElementById('bodyTasks');
    todoInput.addEventListener('keypress', function (event) {
      if (event.key === 'Enter') {
        _this.todoAddTask(todoInput.value);

        todoInput.value = '';
        todoFooter.style.display = 'flex';

        _this.todoCountTask();
      }
    });
    todoTaskWrapper.addEventListener('click', function (event) {
      var parentId = event.target.parentNode.parentNode.id;
      var parentTask = event.target.parentNode.parentNode;

      _this.todoDeleteTask(parentId);

      todoTaskWrapper.removeChild(parentTask);

      _this.todoCountTask();
    });
  };

  return TodoList;
}();

var todoApp = new TodoList([]);
todoApp.todoInit();

},{"./service/todo.service":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var state = false;

var TodoService =
/** @class */
function () {
  function TodoService(todos) {
    // state: boolean = false;
    this.id = 0;
    this.todos = [];
  }

  TodoService.prototype.generateId = function (length) {
    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHUJKLMNOPQRSTUVWXYZ';
    var ID = '';

    for (var i = 0; i < length; i += 1) {
      ID += chars.charAt(Math.floor(Math.random() * chars.length));
    }

    return 'task-' + ID;
  };

  TodoService.prototype.addTask = function (task) {
    var todo = {
      id: this.generateId(4),
      name: task,
      state: false
    };
    this.todos.push(todo);
    console.log(this.todos);
    return todo;
  };

  TodoService.prototype.renderTodo = function (task) {
    var _this = this;

    var container = document.getElementById('bodyTasks');
    var html, newHtml, htmlDom;
    html = "<li class=\"td__body-task" + (task.state === true ? ' td__body-task--complete' : '') + "\" id=\"" + task.id + "\" data-id=\"" + task.id + "\">\n\t\t\t\t\t<input class=\"td__body-task--toggle\" type=\"checkbox\">\n\t\t\t\t\t<span>" + task.name + "</span>\n\t\t\t\t\t<button class=\"td__body-task--destroy\" data-button-id=\"" + task.id + "\"><i class=\"mdi mdi-window-close\"></i></button>\n\t\t\t\t</li>";
    container.insertAdjacentHTML("beforeend", html);
    var findId = document.querySelector("[data-id=\"" + task.id + "\"]");

    if (findId) {
      findId.addEventListener('click', function (event) {
        _this.toggleState(task);

        findId.classList.toggle('td__body-task--complete');
      });
    }
  };

  TodoService.prototype.findId = function () {
    return this.todos.map(function (todo) {
      return todo.id;
    });
  };

  TodoService.prototype.deleteTask = function (index) {
    var item, ids;
    ids = this.findId();
    item = ids.indexOf(index);

    if (item !== -1) {
      this.todos.splice(item, 1);
    }

    return this.todos;
  };

  TodoService.prototype.render = function (input) {
    var newItem;
    newItem = this.addTask(input);
    console.log(newItem);
    this.renderTodo(newItem);
  };

  TodoService.prototype.clearCompleteTask = function () {
    this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.allTask = function () {
    return this.todos.slice();
  };

  TodoService.prototype.activeTask = function () {
    return this.todos = this.todos.filter(function (todo) {
      return todo.state === false;
    });
  };

  TodoService.prototype.completeTask = function () {
    return this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.countTask = function (countElement) {
    if (this.todos.length > 0) {
      countElement.style.display = 'block';
    } else {
      countElement.style.display = 'none';
    }

    return String(this.todos.length);
  };

  TodoService.prototype.toggleState = function (todo) {
    todo.state = !todo.state;
    return todo.state;
  };

  return TodoService;
}();

exports.TodoService = TodoService;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwL3R5cGVzY3JpcHQvYXBwLnRzIiwic3JjL2FwcC90eXBlc2NyaXB0L3NlcnZpY2UvdG9kby5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDRUEsSUFBQSxjQUFBLEdBQUEsT0FBQSxDQUFBLHdCQUFBLENBQUE7O0FBRUEsSUFBQSxRQUFBO0FBQUE7QUFBQSxZQUFBO0FBS0MsV0FBQSxRQUFBLENBQVksS0FBWixFQUF5QjtBQUN4QixTQUFLLFdBQUwsR0FBbUIsSUFBSSxjQUFBLENBQUEsV0FBSixDQUFnQixLQUFoQixDQUFuQjtBQUNBOztBQUdELEVBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxhQUFBLEdBQUEsWUFBQTtBQUNDLFFBQUksU0FBUyxHQUFnQixRQUFRLENBQUMsYUFBVCxDQUF1QixtQkFBdkIsQ0FBN0I7QUFDQSxXQUFPLFNBQVMsQ0FBQyxTQUFWLEdBQXNCLEtBQUssV0FBTCxDQUFpQixTQUFqQixDQUEyQixTQUEzQixDQUE3QjtBQUNBLEdBSEQ7O0FBS0EsRUFBQSxRQUFBLENBQUEsU0FBQSxDQUFBLFdBQUEsR0FBQSxVQUFZLEtBQVosRUFBeUI7QUFDeEIsU0FBSyxXQUFMLENBQWlCLE1BQWpCLENBQXdCLEtBQXhCO0FBQ0EsR0FGRDs7QUFJQSxFQUFBLFFBQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxHQUFBLFVBQWUsS0FBZixFQUE0QjtBQUMzQixXQUFPLEtBQUssV0FBTCxDQUFpQixVQUFqQixDQUE0QixLQUE1QixDQUFQO0FBQ0EsR0FGRDs7QUFJQSxFQUFBLFFBQUEsQ0FBQSxTQUFBLENBQUEsUUFBQSxHQUFBLFlBQUE7QUFBQSxRQUFBLEtBQUEsR0FBQSxJQUFBOztBQUNDLFFBQUksU0FBUyxHQUFxQixRQUFRLENBQUMsY0FBVCxDQUF3QixXQUF4QixDQUFsQztBQUNBLFFBQUksVUFBVSxHQUFnQixRQUFRLENB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LENBQVcsTUFBWCxHQUFvQixDQUF4QixFQUEyQjtBQUMxQixNQUFBLFlBQVksQ0FBQyxLQUFiLENBQW1CLE9BQW5CLEdBQTZCLE9BQTdCO0FBQ0EsS0FGRCxNQUVPO0FBQ04sTUFBQSxZQUFZLENBQUMsS0FBYixDQUFtQixPQUFuQixHQUE2QixNQUE3QjtBQUNBOztBQUNELFdBQU8sTUFBTSxDQUFDLEtBQUssS0FBTCxDQUFXLE1BQVosQ0FBYjtBQUNBLEdBUEQ7O0FBU0EsRUFBQSxXQUFBLENBQUEsU0FBQSxDQUFBLFdBQUEsR0FBQSxVQUFZLElBQVosRUFBc0I7QUFDckIsSUFBQSxJQUFJLENBQUMsS0FBTCxHQUFhLENBQUMsSUFBSSxDQUFDLEtBQW5CO0FBQ0EsV0FBTyxJQUFJLENBQUMsS0FBWjtBQUNBLEdBSEQ7O0FBSUQsU0FBQSxXQUFBO0FBQUMsQ0EzR0QsRUFBQTs7QUFBYSxPQUFBLENBQUEsV0FBQSxHQUFBLFdBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSAnLi9tb2RlbC90b2RvLm1vZGVsJztcbmltcG9ydCB7IFRvZG9TdGF0ZSB9IGZyb20gJy4vaW50ZXJmYWNlL3RvZG8uaW50ZXJmYWNlJztcbmltcG9ydCB7IFRvZG9TZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL3RvZG8uc2VydmljZSc7XG5cbmNsYXNzIFRvZG9MaXN0IHtcblx0XG5cdHByaXZhdGUgdG9kb1NlcnZpY2U6IFRvZG9TZXJ2aWNlO1xuXG5cdFxuXHRjb25zdHJ1Y3Rvcih0b2RvczogVG9kb1tdKSB7XG5cdFx0dGhpcy50b2RvU2VydmljZSA9IG5ldyBUb2RvU2VydmljZSh0b2Rvcyk7XG5cdH1cblxuXG5cdHRvZG9Db3VudFRhc2soKTogc3RyaW5ne1xuXHRcdGxldCB0b2RvQ291bnQgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRkX19oZWFkZXItY291bnQnKTtcblx0XHRyZXR1cm4gdG9kb0NvdW50LmlubmVySFRNTCA9IHRoaXMudG9kb1NlcnZpY2UuY291bnRUYXNrKHRvZG9Db3VudCk7XG5cdH1cblxuXHR0b2RvQWRkVGFzayhpbnB1dDogc3RyaW5nKXtcblx0XHR0aGlzLnRvZG9TZXJ2aWNlLnJlbmRlcihpbnB1dCk7XG5cdH1cblxuXHR0b2RvRGVsZXRlVGFzayhpbmRleDogc3RyaW5nKSB7XG5cdFx0cmV0dXJuIHRoaXMudG9kb1NlcnZpY2UuZGVsZXRlVGFzayhpbmRleCk7XG5cdH1cblxuXHR0b2RvSW5pdCgpe1xuXHRcdGxldCB0b2RvSW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kb0lucHV0Jyk7XG5cdFx0bGV0IHRvZG9Gb290ZXIgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRkX19mb290ZXInKTtcblx0XHRsZXQgdG9kb1Rhc2tXcmFwcGVyID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2R5VGFza3MnKTtcblxuXHRcdHRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChldmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHR0aGlzLnRvZG9BZGRUYXNrKHRvZG9JbnB1dC52YWx1ZSk7XG5cdFx0XHRcdHRvZG9JbnB1dC52YWx1ZSA9ICcnXG5cdFx0XHRcdHRvZG9Gb290ZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdFx0dGhpcy50b2RvQ291bnRUYXNrKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0b2RvVGFza1dyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcblx0XHRcdGxldCBwYXJlbnRJZCA9ICg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG5cdFx0XHRsZXQgcGFyZW50VGFzayA9ICg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG5cdFx0XHR0aGlzLnRvZG9EZWxldGVUYXNrKHBhcmVudElkKTtcblx0XHRcdHRvZG9UYXNrV3JhcHBlci5yZW1vdmVDaGlsZChwYXJlbnRUYXNrKTtcblx0XHRcdHRoaXMudG9kb0NvdW50VGFzaygpO1xuXG5cdFx0fSlcblx0fVxufVxuXG5sZXQgdG9kb0FwcCA9IG5ldyBUb2RvTGlzdChbXSlcblxudG9kb0FwcC50b2RvSW5pdCgpO1xuXG4iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSAnLi4vbW9kZWwvdG9kby5tb2RlbCc7XG5pbXBvcnQgeyBUb2RvU3RhdGUgfSBmcm9tICcuLi9pbnRlcmZhY2UvdG9kby5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVG9kb1NlcnZpY2VJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2UvdG9kb3NlcnZpY2UuaW50ZXJmYWNlJztcblxuXG5sZXQgc3RhdGUgPSBmYWxzZTtcbmV4cG9ydCBjbGFzcyBUb2RvU2VydmljZSBpbXBsZW1lbnRzIFRvZG9TZXJ2aWNlSW50ZXJmYWNlIHtcblx0Ly8gc3RhdGU6IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBpZDogbnVtYmVyID0gMDtcblx0cHJpdmF0ZSB0b2RvczogVG9kb1tdID0gW107XG5cblx0Y29uc3RydWN0b3IodG9kb3M6IFRvZG9bXSkge1xuXHR9XG5cblx0cHJpdmF0ZSBnZW5lcmF0ZUlkKGxlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcblx0XHRjb25zdCBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSFVKS0xNTk9QUVJTVFVWV1hZWic7XG5cdFx0bGV0IElEID0gJyc7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0SUQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xuXHRcdH1cblx0XHRyZXR1cm4gJ3Rhc2stJyArIElEO1xuXHR9XG5cdHByaXZhdGUgYWRkVGFzayh0YXNrOiBzdHJpbmcpOiBUb2RvIHtcblx0XHRsZXQgdG9kbzogVG9kbyA9IHtcblx0XHRcdGlkOiB0aGlzLmdlbmVyYXRlSWQoNCksXG5cdFx0XHRuYW1lOiB0YXNrLFxuXHRcdFx0c3RhdGU6IGZhbHNlLFxuXHRcdH07XG5cdFx0dGhpcy50b2Rvcy5wdXNoKHRvZG8pO1xuXHRcdGNvbnNvbGUubG9nKHRoaXMudG9kb3MpO1xuXHRcdFxuXHRcdHJldHVybiB0b2RvO1xuXHR9XG5cblx0XG5cdHByaXZhdGUgcmVuZGVyVG9kbyh0YXNrOiB7aWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBzdGF0ZTogYm9vbGVhbn0pOiB2b2lke1xuXHRcdGxldCBjb250YWluZXIgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHlUYXNrcycpO1xuXHRcdGxldCBodG1sOiBzdHJpbmcsIG5ld0h0bWw6IHN0cmluZywgaHRtbERvbTtcblx0XHRodG1sID0gIGA8bGkgY2xhc3M9XCJ0ZF9fYm9keS10YXNrJHt0YXNrLnN0YXRlID09PSB0cnVlID8gJyB0ZF9fYm9keS10YXNrLS1jb21wbGV0ZScgOiAnJyB9XCIgaWQ9XCIke3Rhc2suaWR9XCIgZGF0YS1pZD1cIiR7dGFzay5pZH1cIj5cblx0XHRcdFx0XHQ8aW5wdXQgY2xhc3M9XCJ0ZF9fYm9keS10YXNrLS10b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIj5cblx0XHRcdFx0XHQ8c3Bhbj4ke3Rhc2submFtZX08L3NwYW4+XG5cdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cInRkX19ib2R5LXRhc2stLWRlc3Ryb3lcIiBkYXRhLWJ1dHRvbi1pZD1cIiR7dGFzay5pZH1cIj48aSBjbGFzcz1cIm1kaSBtZGktd2luZG93LWNsb3NlXCI+PC9pPjwvYnV0dG9uPlxuXHRcdFx0XHQ8L2xpPmBcblx0XHRcblx0XHRjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGh0bWwpO1xuXG5cdFx0bGV0IGZpbmRJZCA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pZD1cIiR7dGFzay5pZH1cIl1gKVxuXG5cdFx0aWYgKGZpbmRJZCkge1xuXHRcdFx0ZmluZElkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHR0aGlzLnRvZ2dsZVN0YXRlKHRhc2spO1xuXHRcdFx0XHRmaW5kSWQuY2xhc3NMaXN0LnRvZ2dsZSgndGRfX2JvZHktdGFzay0tY29tcGxldGUnKTtcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cdFxuXHRwcml2YXRlIGZpbmRJZCgpIHtcblx0XHRyZXR1cm4gdGhpcy50b2Rvcy5tYXAodG9kbyA9PiB0b2RvLmlkKTtcblx0fVxuXG5cdGRlbGV0ZVRhc2sgKGluZGV4OiBzdHJpbmcpOiBUb2RvW117XG5cdFx0bGV0IGl0ZW0sIGlkcztcblxuXHRcdGlkcyA9IHRoaXMuZmluZElkKCk7XG5cdFx0aXRlbSA9IGlkcy5pbmRleE9mKGluZGV4KVxuXG5cdFx0aWYgKGl0ZW0gIT09IC0xKSB7XG5cdFx0XHR0aGlzLnRvZG9zLnNwbGljZShpdGVtLCAxKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy50b2Rvcztcblx0fVxuXG5cdHJlbmRlcihpbnB1dDogc3RyaW5nKTogdm9pZHtcblx0XHRsZXQgbmV3SXRlbTtcblx0XHRuZXdJdGVtID0gdGhpcy5hZGRUYXNrKGlucHV0KTtcblx0XHRjb25zb2xlLmxvZyhuZXdJdGVtKTtcblxuXHRcdHRoaXMucmVuZGVyVG9kbyhuZXdJdGVtKTtcblx0fVxuXHRjbGVhckNvbXBsZXRlVGFzaygpIHtcblx0XHR0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5maWx0ZXIodG9kbyA9PiB0b2RvLnN0YXRlID09PSB0cnVlKTtcblx0fVxuXG5cdGFsbFRhc2soKSB7XG5cdFx0cmV0dXJuIHRoaXMudG9kb3Muc2xpY2UoKTtcblx0fVxuXG5cdGFjdGl2ZVRhc2soKSB7XG5cdFx0cmV0dXJuICh0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5maWx0ZXIoXG5cdFx0XHR0b2RvID0+IHRvZG8uc3RhdGUgPT09IGZhbHNlXG5cdFx0KSk7XG5cdH1cblxuXHRjb21wbGV0ZVRhc2soKSB7XG5cdFx0cmV0dXJuICh0aGlzLnRvZG9zID0gdGhpcy50b2Rvcy5maWx0ZXIoXG5cdFx0XHR0b2RvID0+IHRvZG8uc3RhdGUgPT09IHRydWVcblx0XHQpKTtcblx0fVxuXG5cdGNvdW50VGFzayhjb3VudEVsZW1lbnQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHtcblx0XHRpZiAodGhpcy50b2Rvcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb3VudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvdW50RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdH1cblx0XHRyZXR1cm4gU3RyaW5nKHRoaXMudG9kb3MubGVuZ3RoKTtcblx0fVxuXG5cdHRvZ2dsZVN0YXRlKHRvZG86IFRvZG8pOiBib29sZWFue1xuXHRcdHRvZG8uc3RhdGUgPSAhdG9kby5zdGF0ZVxuXHRcdHJldHVybiB0b2RvLnN0YXRlO1xuXHR9XG59XG4iXX0=
