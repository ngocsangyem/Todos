(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var todo_service_1 = require("./service/todo.service");

var TodoList =
/** @class */
function () {
  function TodoList(todos) {
    this.todoService = new todo_service_1.TodoService(todos);
  } // todoToggleState(todo: Todo){
  // 	this.todoService.toggleState(todo);
  // }


  TodoList.prototype.todoCountTask = function (countElement) {
    return this.todoService.countTask(countElement);
  };

  TodoList.prototype.todoAddTask = function (input) {
    this.todoService.render(input);
  };

  TodoList.prototype.todoInit = function () {
    var _this = this;

    var todoInput = document.getElementById('todoInput');
    var todoFooter = document.querySelector('.td__footer');
    var todoCount = document.querySelector('.td__header-count');
    var todoToggle = document.getElementsByClassName('td__body-task');
    todoInput.addEventListener('keypress', function (event) {
      if (event.key === 'Enter') {
        _this.todoAddTask(todoInput.value);

        todoInput.value = '';
        todoFooter.style.display = 'flex';
        todoCount.innerHTML = _this.todoCountTask(todoCount);
      }
    }); // document.addEventListener('click', event => {
    // 	if ((<HTMLElement>event.target).classList.contains('td__body-task')) {
    // 		console.log(123);
    // 		this.todoToggleState();
    // 	}
    // }, false)
  };

  return TodoList;
}();

var todoApp = new TodoList([]);
todoApp.todoInit();

},{"./service/todo.service":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var state = false;

var TodoService =
/** @class */
function () {
  function TodoService(todos) {
    // state: boolean = false;
    this.id = 0;
    this.todos = [];
  }

  TodoService.prototype.generateId = function (length) {
    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHUJKLMNOPQRSTUVWXYZ';
    var ID = '';

    for (var i = 0; i < length; i += 1) {
      ID += chars.charAt(Math.floor(Math.random() * chars.length));
    }

    return 'task-' + ID;
  };

  TodoService.prototype.addTask = function (task) {
    var todo = {
      id: this.generateId(4),
      name: task,
      state: false
    };
    this.todos.push(todo);
    console.log(this.todos);
    return todo;
  };

  TodoService.prototype.renderTodo = function (task) {
    var _this = this;

    var container = document.getElementById('bodyTasks');
    var html, newHtml, htmlDom;
    html = "<li class=\"td__body-task" + (task.state === true ? ' td__body-task--complete' : '') + "\" data-id=\"" + task.id + "\" data-state=\"" + (task.state === true ? 'complete' : 'active') + "\">\n\t\t\t\t\t<input class=\"td__body-task--toggle\" type=\"checkbox\">\n\t\t\t\t\t<span>" + task.name + "</span>\n\t\t\t\t\t<button class=\"td__body-task--destroy\" data-id=\"" + task.id + "\"><i class=\"mdi mdi-window-close\"></i></button>\n\t\t\t\t</li>";
    container.insertAdjacentHTML("beforeend", html);
    var findId = document.querySelector("[data-id=\"" + task.id + "\"]");

    if (findId) {
      findId.addEventListener('click', function (event) {
        _this.toggleState(task);

        findId.remove();

        _this.renderTodo(task);
      });
    }
  };

  TodoService.prototype.render = function (input) {
    var newItem;
    newItem = this.addTask(input);
    console.log(newItem);
    this.renderTodo(newItem);
  };

  TodoService.prototype.clearCompleteTask = function () {
    this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.allTask = function () {
    return this.todos.slice();
  };

  TodoService.prototype.activeTask = function () {
    return this.todos = this.todos.filter(function (todo) {
      return todo.state === false;
    });
  };

  TodoService.prototype.completeTask = function () {
    return this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.countTask = function (countElement) {
    if (this.todos.length > 0) {
      countElement.style.display = 'block';
    } else {
      countElement.style.display = 'none';
    }

    return String(this.todos.length);
  };

  TodoService.prototype.renderAfterClick = function (todo, container) {
    for (todo in this.todos) {
      if (this.todos.hasOwnProperty(todo)) {
        var element = this.todos[todo];

        if (element.id) {
          container.insertAdjacentHTML('beforeend', this.renderTodo(element));
        }
      }
    }
  };

  TodoService.prototype.toggleState = function (todo) {
    todo.state = !todo.state;
    return todo.state;
  };

  TodoService.prototype.destroyTask = function () {};

  return TodoService;
}();

exports.TodoService = TodoService;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwL3R5cGVzY3JpcHQvYXBwLnRzIiwic3JjL2FwcC90eXBlc2NyaXB0L3NlcnZpY2UvdG9kby5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDRUEsSUFBQSxjQUFBLEdBQUEsT0FBQSxDQUFBLHdCQUFBLENBQUE7O0FBRUEsSUFBQSxRQUFBO0FBQUE7QUFBQSxZQUFBO0FBS0MsV0FBQSxRQUFBLENBQVksS0FBWixFQUF5QjtBQUN4QixTQUFLLFdBQUwsR0FBbUIsSUFBSSxjQUFBLENBQUEsV0FBSixDQUFnQixLQUFoQixDQUFuQjtBQUNBLEdBUEYsQ0FTQztBQUNBO0FBQ0E7OztBQUVBLEVBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxhQUFBLEdBQUEsVUFBYyxZQUFkLEVBQXVDO0FBQ3RDLFdBQU8sS0FBSyxXQUFMLENBQWlCLFNBQWpCLENBQTJCLFlBQTNCLENBQVA7QUFDQSxHQUZEOztBQUlBLEVBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxXQUFBLEdBQUEsVUFBWSxLQUFaLEVBQXlCO0FBQ3hCLFNBQUssV0FBTCxDQUFpQixNQUFqQixDQUF3QixLQUF4QjtBQUNBLEdBRkQ7O0FBSUEsRUFBQSxRQUFBLENBQUEsU0FBQSxDQUFBLFFBQUEsR0FBQSxZQUFBO0FBQUEsUUFBQSxLQUFBLEdBQUEsSUFBQTs7QUFDQyxRQUFJLFNBQVMsR0FBcUIsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsV0FBeEIsQ0FBbEM7QUFDQSxRQUFJLFVBQVUsR0FBZ0IsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsYUFBdkIsQ0FBOUI7QUFDQSxRQUFJLFNBQVMsR0FBZ0IsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsbUJBQXZCLENBQTdCO0FBQ0EsUUFBSSxVQUFVLEdBQUcsUUFBUSxDQUFDLHNCQUFULENBQWdDLGVBQWhDLENBQWpCO0FBRUEsSUFBQSxTQUFTLENBQUMsZ0JBQVYs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QSxZQUFBLENBQWdCLENBQWhCOztBQUNELFNBQUEsV0FBQTtBQUFDLENBeEdELEVBQUE7O0FBQWEsT0FBQSxDQUFBLFdBQUEsR0FBQSxXQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHsgVG9kbyB9IGZyb20gJy4vbW9kZWwvdG9kby5tb2RlbCc7XG5pbXBvcnQgeyBUb2RvU3RhdGUgfSBmcm9tICcuL2ludGVyZmFjZS90b2RvLmludGVyZmFjZSc7XG5pbXBvcnQgeyBUb2RvU2VydmljZSB9IGZyb20gJy4vc2VydmljZS90b2RvLnNlcnZpY2UnO1xuXG5jbGFzcyBUb2RvTGlzdCB7XG5cdFxuXHRwcml2YXRlIHRvZG9TZXJ2aWNlOiBUb2RvU2VydmljZTtcblxuXHRcblx0Y29uc3RydWN0b3IodG9kb3M6IFRvZG9bXSkge1xuXHRcdHRoaXMudG9kb1NlcnZpY2UgPSBuZXcgVG9kb1NlcnZpY2UodG9kb3MpO1xuXHR9XG5cblx0Ly8gdG9kb1RvZ2dsZVN0YXRlKHRvZG86IFRvZG8pe1xuXHQvLyBcdHRoaXMudG9kb1NlcnZpY2UudG9nZ2xlU3RhdGUodG9kbyk7XG5cdC8vIH1cblxuXHR0b2RvQ291bnRUYXNrKGNvdW50RWxlbWVudDogSFRNTEVsZW1lbnQpOiBzdHJpbmd7XG5cdFx0cmV0dXJuIHRoaXMudG9kb1NlcnZpY2UuY291bnRUYXNrKGNvdW50RWxlbWVudCk7XG5cdH1cblxuXHR0b2RvQWRkVGFzayhpbnB1dDogc3RyaW5nKXtcblx0XHR0aGlzLnRvZG9TZXJ2aWNlLnJlbmRlcihpbnB1dCk7XG5cdH1cblxuXHR0b2RvSW5pdCgpe1xuXHRcdGxldCB0b2RvSW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kb0lucHV0Jyk7XG5cdFx0bGV0IHRvZG9Gb290ZXIgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRkX19mb290ZXInKTtcblx0XHRsZXQgdG9kb0NvdW50ID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZF9faGVhZGVyLWNvdW50Jyk7XG5cdFx0bGV0IHRvZG9Ub2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZF9fYm9keS10YXNrJyk7XG5cblx0XHR0b2RvSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdFx0dGhpcy50b2RvQWRkVGFzayh0b2RvSW5wdXQudmFsdWUpO1xuXHRcdFx0XHR0b2RvSW5wdXQudmFsdWUgPSAnJ1xuXHRcdFx0XHR0b2RvRm9vdGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0XHRcdHRvZG9Db3VudC5pbm5lckhUTUwgPSB0aGlzLnRvZG9Db3VudFRhc2sodG9kb0NvdW50KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdC8vIFx0aWYgKCg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5jbGFzc0xpc3QuY29udGFpbnMoJ3RkX19ib2R5LXRhc2snKSkge1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZygxMjMpO1xuXHRcdC8vIFx0XHR0aGlzLnRvZG9Ub2dnbGVTdGF0ZSgpO1xuXHRcdC8vIFx0fVxuXHRcdC8vIH0sIGZhbHNlKVxuXHR9XG59XG5cbmxldCB0b2RvQXBwID0gbmV3IFRvZG9MaXN0KFtdKVxuXG50b2RvQXBwLnRvZG9Jbml0KCk7XG5cbiIsImltcG9ydCB7IFRvZG8gfSBmcm9tICcuLi9tb2RlbC90b2RvLm1vZGVsJztcbmltcG9ydCB7IFRvZG9TdGF0ZSB9IGZyb20gJy4uL2ludGVyZmFjZS90b2RvLmludGVyZmFjZSc7XG5pbXBvcnQgeyBUb2RvU2VydmljZUludGVyZmFjZSB9IGZyb20gJy4uL2ludGVyZmFjZS90b2Rvc2VydmljZS5pbnRlcmZhY2UnO1xuXG5cbmxldCBzdGF0ZSA9IGZhbHNlO1xuZXhwb3J0IGNsYXNzIFRvZG9TZXJ2aWNlIGltcGxlbWVudHMgVG9kb1NlcnZpY2VJbnRlcmZhY2Uge1xuXHQvLyBzdGF0ZTogYm9vbGVhbiA9IGZhbHNlO1xuXHRwcml2YXRlIGlkOiBudW1iZXIgPSAwO1xuXHRwcml2YXRlIHRvZG9zOiBUb2RvW10gPSBbXTtcblxuXHRjb25zdHJ1Y3Rvcih0b2RvczogVG9kb1tdKSB7XG5cdH1cblxuXHRwcml2YXRlIGdlbmVyYXRlSWQobGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdIVUpLTE1OT1BRUlNUVVZXWFlaJztcblx0XHRsZXQgSUQgPSAnJztcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRJRCArPSBjaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKSk7XG5cdFx0fVxuXHRcdHJldHVybiAndGFzay0nICsgSUQ7XG5cdH1cblx0cHJpdmF0ZSBhZGRUYXNrKHRhc2s6IHN0cmluZyk6IFRvZG8ge1xuXHRcdGxldCB0b2RvOiBUb2RvID0ge1xuXHRcdFx0aWQ6IHRoaXMuZ2VuZXJhdGVJZCg0KSxcblx0XHRcdG5hbWU6IHRhc2ssXG5cdFx0XHRzdGF0ZTogZmFsc2UsXG5cdFx0fTtcblx0XHR0aGlzLnRvZG9zLnB1c2godG9kbyk7XG5cdFx0Y29uc29sZS5sb2codGhpcy50b2Rvcyk7XG5cdFx0XG5cdFx0cmV0dXJuIHRvZG87XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclRvZG8odGFzazoge2lkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgc3RhdGU6IGJvb2xlYW59KTogdm9pZHtcblx0XHRsZXQgY29udGFpbmVyID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2R5VGFza3MnKTtcblx0XHRsZXQgaHRtbDogc3RyaW5nLCBuZXdIdG1sOiBzdHJpbmcsIGh0bWxEb207XG5cdFx0aHRtbCA9ICBgPGxpIGNsYXNzPVwidGRfX2JvZHktdGFzayR7dGFzay5zdGF0ZSA9PT0gdHJ1ZSA/ICcgdGRfX2JvZHktdGFzay0tY29tcGxldGUnIDogJycgfVwiIGRhdGEtaWQ9XCIke3Rhc2suaWR9XCIgZGF0YS1zdGF0ZT1cIiR7dGFzay5zdGF0ZSA9PT0gdHJ1ZSA/ICdjb21wbGV0ZScgOiAnYWN0aXZlJ31cIj5cblx0XHRcdFx0XHQ8aW5wdXQgY2xhc3M9XCJ0ZF9fYm9keS10YXNrLS10b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIj5cblx0XHRcdFx0XHQ8c3Bhbj4ke3Rhc2submFtZX08L3NwYW4+XG5cdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cInRkX19ib2R5LXRhc2stLWRlc3Ryb3lcIiBkYXRhLWlkPVwiJHt0YXNrLmlkfVwiPjxpIGNsYXNzPVwibWRpIG1kaS13aW5kb3ctY2xvc2VcIj48L2k+PC9idXR0b24+XG5cdFx0XHRcdDwvbGk+YFxuXHRcdFxuXHRcdGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgaHRtbCk7XG5cblx0XHRsZXQgZmluZElkID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHt0YXNrLmlkfVwiXWApXG5cblx0XHRpZiAoZmluZElkKSB7XG5cdFx0XHRmaW5kSWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdHRoaXMudG9nZ2xlU3RhdGUodGFzayk7XG5cdFx0XHRcdGZpbmRJZC5yZW1vdmUoKVxuXHRcdFx0XHR0aGlzLnJlbmRlclRvZG8odGFzaylcblx0XHRcdH0pXG5cdFx0fVxuXHRcdFxuXHR9XG5cdFxuXHRyZW5kZXIoaW5wdXQ6IHN0cmluZyk6IHZvaWR7XG5cdFx0bGV0IG5ld0l0ZW07XG5cdFx0bmV3SXRlbSA9IHRoaXMuYWRkVGFzayhpbnB1dCk7XG5cdFx0Y29uc29sZS5sb2cobmV3SXRlbSk7XG5cblx0XHR0aGlzLnJlbmRlclRvZG8obmV3SXRlbSk7XG5cdH1cblx0Y2xlYXJDb21wbGV0ZVRhc2soKSB7XG5cdFx0dGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKHRvZG8gPT4gdG9kby5zdGF0ZSA9PT0gdHJ1ZSk7XG5cdH1cblxuXHRhbGxUYXNrKCkge1xuXHRcdHJldHVybiB0aGlzLnRvZG9zLnNsaWNlKCk7XG5cdH1cblxuXHRhY3RpdmVUYXNrKCkge1xuXHRcdHJldHVybiAodGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKFxuXHRcdFx0dG9kbyA9PiB0b2RvLnN0YXRlID09PSBmYWxzZVxuXHRcdCkpO1xuXHR9XG5cblx0Y29tcGxldGVUYXNrKCkge1xuXHRcdHJldHVybiAodGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKFxuXHRcdFx0dG9kbyA9PiB0b2RvLnN0YXRlID09PSB0cnVlXG5cdFx0KSk7XG5cdH1cblxuXHRjb3VudFRhc2soY291bnRFbGVtZW50OiBIVE1MRWxlbWVudCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMudG9kb3MubGVuZ3RoID4gMCkge1xuXHRcdFx0Y291bnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb3VudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHR9XG5cdFx0cmV0dXJuIFN0cmluZyh0aGlzLnRvZG9zLmxlbmd0aCk7XG5cdH1cblxuXHRyZW5kZXJBZnRlckNsaWNrICh0b2RvLCBjb250YWluZXIpe1xuXHRcdGZvciAodG9kbyBpbiB0aGlzLnRvZG9zKSB7XG5cdFx0XHRpZiAodGhpcy50b2Rvcy5oYXNPd25Qcm9wZXJ0eSh0b2RvKSkge1xuXHRcdFx0XHRsZXQgZWxlbWVudCA9IHRoaXMudG9kb3NbdG9kb107XG5cdFx0XHRcdGlmIChlbGVtZW50LmlkKSB7XG5cdFx0XHRcdFx0Y29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGhpcy5yZW5kZXJUb2RvKGVsZW1lbnQpKVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHR0b2dnbGVTdGF0ZSh0b2RvOiBUb2RvKTogYm9vbGVhbntcblx0XHR0b2RvLnN0YXRlID0gIXRvZG8uc3RhdGVcblx0XHRyZXR1cm4gdG9kby5zdGF0ZTtcblx0fVxuXG5cdGRlc3Ryb3lUYXNrKCkge31cbn1cbiJdfQ==
