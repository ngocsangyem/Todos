(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var todo_service_1 = require("./service/todo.service");

var TodoList =
/** @class */
function () {
  function TodoList(todos) {
    this.todoService = new todo_service_1.TodoService(todos);
  }

  TodoList.prototype.todoCountTask = function () {
    var todoCount = document.querySelector('.td__header-count');
    return todoCount.innerHTML = this.todoService.countTask(todoCount);
  };

  TodoList.prototype.todoAddTask = function (input) {
    this.todoService.render(input);
  };

  TodoList.prototype.todoDeleteTask = function (index) {
    return this.todoService.deleteTask(index);
  };

  TodoList.prototype.todoActiveTask = function () {
    var todosActiveTask = this.todoService.activeTask();
    return this.todoService.renderFilter(todosActiveTask);
  };

  TodoList.prototype.todoInit = function () {
    var _this = this;

    var todoInput = document.getElementById('todoInput');
    var todoFooter = document.querySelector('.td__footer');
    var todoTaskWrapper = document.getElementById('bodyTasks');
    var todoBtnActive = document.querySelector('.td__footer-filter--active');
    todoInput.addEventListener('keypress', function (event) {
      if (event.key === 'Enter') {
        _this.todoAddTask(todoInput.value);

        todoInput.value = '';
        todoFooter.style.display = 'flex';

        _this.todoCountTask();
      }
    });
    todoTaskWrapper.addEventListener('click', function (event) {
      var parentId = event.target.parentNode.parentNode.id;
      var parentTask = event.target.parentNode.parentNode;

      _this.todoDeleteTask(parentId);

      if (parentTask) {
        todoTaskWrapper.removeChild(parentTask);
      }

      _this.todoCountTask();
    });
    todoBtnActive.addEventListener('click', function () {
      console.log(todoTaskWrapper.firstChild);

      _this.todoActiveTask();
    });
  };

  return TodoList;
}();

var todoApp = new TodoList([]);
todoApp.todoInit();

},{"./service/todo.service":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var state = false;

var TodoService =
/** @class */
function () {
  function TodoService(todos) {
    // state: boolean = false;
    this.id = 0;
    this.todos = [];
  }

  TodoService.prototype.generateId = function (length) {
    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHUJKLMNOPQRSTUVWXYZ';
    var ID = '';

    for (var i = 0; i < length; i += 1) {
      ID += chars.charAt(Math.floor(Math.random() * chars.length));
    }

    return 'task-' + ID;
  };

  TodoService.prototype.addTask = function (task) {
    var todo = {
      id: this.generateId(4),
      name: task,
      state: false
    };
    this.todos.push(todo);
    console.log(this.todos);
    return todo;
  };

  TodoService.prototype.renderTaskFilter = function (task) {
    var html, container;
    container = document.getElementById('bodyTasks');
    html = "<li class=\"td__body-task" + (task.state === true ? ' td__body-task--complete' : '') + "\" id=\"" + task.id + "\" data-id=\"" + task.id + "\">\n\t\t\t<input class=\"td__body-task--toggle\" type=\"checkbox\">\n\t\t\t<span>" + task.name + "</span>\n\t\t\t<button class=\"td__body-task--destroy\" data-button-id=\"" + task.id + "\"><i class=\"mdi mdi-window-close\"></i></button>\n\t\t</li>";
    container.insertAdjacentHTML("beforeend", html);
  };

  TodoService.prototype.renderTask = function (task) {
    var _this = this;

    var container = document.getElementById('bodyTasks');
    var html, newHtml, htmlDom;
    html = "<li class=\"td__body-task" + (task.state === true ? ' td__body-task--complete' : '') + "\" id=\"" + task.id + "\" data-id=\"" + task.id + "\">\n\t\t\t\t\t<input class=\"td__body-task--toggle\" type=\"checkbox\">\n\t\t\t\t\t<span>" + task.name + "</span>\n\t\t\t\t\t<button class=\"td__body-task--destroy\" data-button-id=\"" + task.id + "\"><i class=\"mdi mdi-window-close\"></i></button>\n\t\t\t\t</li>";
    container.insertAdjacentHTML("beforeend", html);
    var findId = document.querySelector("[data-id=\"" + task.id + "\"]");

    if (findId) {
      findId.addEventListener('click', function (event) {
        _this.toggleState(task);

        findId.classList.toggle('td__body-task--complete');
      });
    }
  };

  TodoService.prototype.findId = function () {
    return this.todos.map(function (todo) {
      return todo.id;
    });
  };

  TodoService.prototype.render = function (input) {
    var newItem;
    newItem = this.addTask(input);
    console.log(newItem);
    this.renderTask(newItem);
  };

  TodoService.prototype.renderFilter = function (tasks) {
    for (var index = 0; index < tasks.length; index++) {
      var element = tasks[index];
      this.renderTaskFilter(element);
    }
  };

  TodoService.prototype.deleteTask = function (index) {
    var item, ids;
    ids = this.findId();
    item = ids.indexOf(index);

    if (item !== -1) {
      this.todos.splice(item, 1);
    }

    return this.todos;
  };

  TodoService.prototype.clearCompleteTask = function () {
    this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.allTask = function () {
    return this.todos.slice();
  };

  TodoService.prototype.activeTask = function () {
    return this.todos = this.todos.slice().filter(function (todo) {
      return todo.state === false;
    });
  };

  TodoService.prototype.completeTask = function () {
    return this.todos = this.todos.filter(function (todo) {
      return todo.state === true;
    });
  };

  TodoService.prototype.countTask = function (countElement) {
    if (this.todos.length > 0) {
      countElement.style.display = 'block';
    } else {
      countElement.style.display = 'none';
    }

    return String(this.todos.length);
  };

  TodoService.prototype.toggleState = function (todo) {
    todo.state = !todo.state;
    return todo.state;
  };

  return TodoService;
}();

exports.TodoService = TodoService;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwL3R5cGVzY3JpcHQvYXBwLnRzIiwic3JjL2FwcC90eXBlc2NyaXB0L3NlcnZpY2UvdG9kby5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDRUEsSUFBQSxjQUFBLEdBQUEsT0FBQSxDQUFBLHdCQUFBLENBQUE7O0FBRUEsSUFBQSxRQUFBO0FBQUE7QUFBQSxZQUFBO0FBS0MsV0FBQSxRQUFBLENBQVksS0FBWixFQUF5QjtBQUN4QixTQUFLLFdBQUwsR0FBbUIsSUFBSSxjQUFBLENBQUEsV0FBSixDQUFnQixLQUFoQixDQUFuQjtBQUNBOztBQUdELEVBQUEsUUFBQSxDQUFBLFNBQUEsQ0FBQSxhQUFBLEdBQUEsWUFBQTtBQUNDLFFBQUksU0FBUyxHQUFnQixRQUFRLENBQUMsYUFBVCxDQUF1QixtQkFBdkIsQ0FBN0I7QUFDQSxXQUFPLFNBQVMsQ0FBQyxTQUFWLEdBQXNCLEtBQUssV0FBTCxDQUFpQixTQUFqQixDQUEyQixTQUEzQixDQUE3QjtBQUNBLEdBSEQ7O0FBS0EsRUFBQSxRQUFBLENBQUEsU0FBQSxDQUFBLFdBQUEsR0FBQSxVQUFZLEtBQVosRUFBeUI7QUFDeEIsU0FBSyxXQUFMLENBQWlCLE1BQWpCLENBQXdCLEtBQXhCO0FBQ0EsR0FGRDs7QUFJQSxFQUFBLFFBQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxHQUFBLFVBQWUsS0FBZixFQUE0QjtBQUMzQixXQUFPLEtBQUssV0FBTCxDQUFpQixVQUFqQixDQUE0QixLQUE1QixDQUFQO0FBQ0EsR0FGRDs7QUFJQSxFQUFBLFFBQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxHQUFBLFlBQUE7QUFDQyxRQUFJLGVBQWUsR0FBRyxLQUFLLFdBQUwsQ0FBaUIsVUFBakIsRUFBdEI7QUFDQSxXQUFPLEtBQUssV0FBTCxDQUFpQixZQUFqQixDQUE4QixlQUE5QixDQUFQO0FBQ0EsR0FIRDs7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QSxJQUFJLENBQUMsS0FBTCxLQUFBLElBQUE7QUFBbUIsS0FEUCxDQUFyQjtBQUdBLEdBSkQ7O0FBTUEsRUFBQSxXQUFBLENBQUEsU0FBQSxDQUFBLFNBQUEsR0FBQSxVQUFVLFlBQVYsRUFBbUM7QUFDbEMsUUFBSSxLQUFLLEtBQUwsQ0FBVyxNQUFYLEdBQW9CLENBQXhCLEVBQTJCO0FBQzFCLE1BQUEsWUFBWSxDQUFDLEtBQWIsQ0FBbUIsT0FBbkIsR0FBNkIsT0FBN0I7QUFDQSxLQUZELE1BRU87QUFDTixNQUFBLFlBQVksQ0FBQyxLQUFiLENBQW1CLE9BQW5CLEdBQTZCLE1BQTdCO0FBQ0E7O0FBQ0QsV0FBTyxNQUFNLENBQUMsS0FBSyxLQUFMLENBQVcsTUFBWixDQUFiO0FBQ0EsR0FQRDs7QUFTQSxFQUFBLFdBQUEsQ0FBQSxTQUFBLENBQUEsV0FBQSxHQUFBLFVBQVksSUFBWixFQUFzQjtBQUNyQixJQUFBLElBQUksQ0FBQyxLQUFMLEdBQWEsQ0FBQyxJQUFJLENBQUMsS0FBbkI7QUFDQSxXQUFPLElBQUksQ0FBQyxLQUFaO0FBQ0EsR0FIRDs7QUFJRCxTQUFBLFdBQUE7QUFBQyxDQTlIRCxFQUFBOztBQUFhLE9BQUEsQ0FBQSxXQUFBLEdBQUEsV0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCB7IFRvZG8gfSBmcm9tICcuL21vZGVsL3RvZG8ubW9kZWwnO1xuaW1wb3J0IHsgVG9kb1N0YXRlIH0gZnJvbSAnLi9pbnRlcmZhY2UvdG9kby5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVG9kb1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UvdG9kby5zZXJ2aWNlJztcblxuY2xhc3MgVG9kb0xpc3Qge1xuXHRcblx0cHJpdmF0ZSB0b2RvU2VydmljZTogVG9kb1NlcnZpY2U7XG5cblx0XG5cdGNvbnN0cnVjdG9yKHRvZG9zOiBUb2RvW10pIHtcblx0XHR0aGlzLnRvZG9TZXJ2aWNlID0gbmV3IFRvZG9TZXJ2aWNlKHRvZG9zKTtcblx0fVxuXG5cblx0dG9kb0NvdW50VGFzaygpOiBzdHJpbmd7XG5cdFx0bGV0IHRvZG9Db3VudCA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGRfX2hlYWRlci1jb3VudCcpO1xuXHRcdHJldHVybiB0b2RvQ291bnQuaW5uZXJIVE1MID0gdGhpcy50b2RvU2VydmljZS5jb3VudFRhc2sodG9kb0NvdW50KTtcblx0fVxuXG5cdHRvZG9BZGRUYXNrKGlucHV0OiBzdHJpbmcpe1xuXHRcdHRoaXMudG9kb1NlcnZpY2UucmVuZGVyKGlucHV0KTtcblx0fVxuXG5cdHRvZG9EZWxldGVUYXNrKGluZGV4OiBzdHJpbmcpIHtcblx0XHRyZXR1cm4gdGhpcy50b2RvU2VydmljZS5kZWxldGVUYXNrKGluZGV4KTtcblx0fVxuXG5cdHRvZG9BY3RpdmVUYXNrICgpe1xuXHRcdGxldCB0b2Rvc0FjdGl2ZVRhc2sgPSB0aGlzLnRvZG9TZXJ2aWNlLmFjdGl2ZVRhc2soKVxuXHRcdHJldHVybiB0aGlzLnRvZG9TZXJ2aWNlLnJlbmRlckZpbHRlcih0b2Rvc0FjdGl2ZVRhc2spO1xuXHR9XG5cblx0dG9kb0luaXQoKXtcblx0XHRsZXQgdG9kb0lucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG9JbnB1dCcpO1xuXHRcdGxldCB0b2RvRm9vdGVyID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZF9fZm9vdGVyJyk7XG5cdFx0bGV0IHRvZG9UYXNrV3JhcHBlciA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9keVRhc2tzJyk7XG5cdFx0bGV0IHRvZG9CdG5BY3RpdmUgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRkX19mb290ZXItZmlsdGVyLS1hY3RpdmUnKTtcblxuXHRcdHRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChldmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHR0aGlzLnRvZG9BZGRUYXNrKHRvZG9JbnB1dC52YWx1ZSk7XG5cdFx0XHRcdHRvZG9JbnB1dC52YWx1ZSA9ICcnXG5cdFx0XHRcdHRvZG9Gb290ZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdFx0dGhpcy50b2RvQ291bnRUYXNrKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0b2RvVGFza1dyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcblx0XHRcdGxldCBwYXJlbnRJZCA9ICg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG5cdFx0XHRsZXQgcGFyZW50VGFzayA9ICg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG5cdFx0XHR0aGlzLnRvZG9EZWxldGVUYXNrKHBhcmVudElkKTtcblx0XHRcdGlmIChwYXJlbnRUYXNrKSB7XG5cdFx0XHRcdHRvZG9UYXNrV3JhcHBlci5yZW1vdmVDaGlsZChwYXJlbnRUYXNrKTtcblx0XHRcdH1cblx0XHRcdHRoaXMudG9kb0NvdW50VGFzaygpO1xuXHRcdH0pXG5cblx0XHR0b2RvQnRuQWN0aXZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2codG9kb1Rhc2tXcmFwcGVyLmZpcnN0Q2hpbGQpO1xuXHRcdFx0XG5cdFx0XHR0aGlzLnRvZG9BY3RpdmVUYXNrKCk7XG5cdFx0fSlcblx0fVxufVxuXG5sZXQgdG9kb0FwcCA9IG5ldyBUb2RvTGlzdChbXSlcblxudG9kb0FwcC50b2RvSW5pdCgpO1xuXG4iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSAnLi4vbW9kZWwvdG9kby5tb2RlbCc7XG5pbXBvcnQgeyBUb2RvU3RhdGUgfSBmcm9tICcuLi9pbnRlcmZhY2UvdG9kby5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVG9kb1NlcnZpY2VJbnRlcmZhY2UgfSBmcm9tICcuLi9pbnRlcmZhY2UvdG9kb3NlcnZpY2UuaW50ZXJmYWNlJztcblxuXG5sZXQgc3RhdGUgPSBmYWxzZTtcbmV4cG9ydCBjbGFzcyBUb2RvU2VydmljZSBpbXBsZW1lbnRzIFRvZG9TZXJ2aWNlSW50ZXJmYWNlIHtcblx0Ly8gc3RhdGU6IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBpZDogbnVtYmVyID0gMDtcblx0cHJpdmF0ZSB0b2RvczogVG9kb1tdID0gW107XG5cblx0Y29uc3RydWN0b3IodG9kb3M6IFRvZG9bXSkge1xuXHR9XG5cblx0cHJpdmF0ZSBnZW5lcmF0ZUlkKGxlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcblx0XHRjb25zdCBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSFVKS0xNTk9QUVJTVFVWV1hZWic7XG5cdFx0bGV0IElEID0gJyc7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0SUQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xuXHRcdH1cblx0XHRyZXR1cm4gJ3Rhc2stJyArIElEO1xuXHR9XG5cdHByaXZhdGUgYWRkVGFzayh0YXNrOiBzdHJpbmcpOiBUb2RvIHtcblx0XHRsZXQgdG9kbzogVG9kbyA9IHtcblx0XHRcdGlkOiB0aGlzLmdlbmVyYXRlSWQoNCksXG5cdFx0XHRuYW1lOiB0YXNrLFxuXHRcdFx0c3RhdGU6IGZhbHNlLFxuXHRcdH07XG5cdFx0dGhpcy50b2Rvcy5wdXNoKHRvZG8pO1xuXHRcdGNvbnNvbGUubG9nKHRoaXMudG9kb3MpO1xuXHRcdFxuXHRcdHJldHVybiB0b2RvO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUYXNrRmlsdGVyICh0YXNrOiBUb2RvKSB7XG5cdFx0bGV0IGh0bWwsIGNvbnRhaW5lcjtcblx0XHRjb250YWluZXIgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHlUYXNrcycpO1xuXG5cdFx0aHRtbCA9ICBgPGxpIGNsYXNzPVwidGRfX2JvZHktdGFzayR7dGFzay5zdGF0ZSA9PT0gdHJ1ZSA/ICcgdGRfX2JvZHktdGFzay0tY29tcGxldGUnIDogJycgfVwiIGlkPVwiJHt0YXNrLmlkfVwiIGRhdGEtaWQ9XCIke3Rhc2suaWR9XCI+XG5cdFx0XHQ8aW5wdXQgY2xhc3M9XCJ0ZF9fYm9keS10YXNrLS10b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIj5cblx0XHRcdDxzcGFuPiR7dGFzay5uYW1lfTwvc3Bhbj5cblx0XHRcdDxidXR0b24gY2xhc3M9XCJ0ZF9fYm9keS10YXNrLS1kZXN0cm95XCIgZGF0YS1idXR0b24taWQ9XCIke3Rhc2suaWR9XCI+PGkgY2xhc3M9XCJtZGkgbWRpLXdpbmRvdy1jbG9zZVwiPjwvaT48L2J1dHRvbj5cblx0XHQ8L2xpPmBcblxuXHRcdGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgaHRtbCk7XG5cdH1cblx0cHJpdmF0ZSByZW5kZXJUYXNrKHRhc2s6IFRvZG8pOiB2b2lke1xuXHRcdGxldCBjb250YWluZXIgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHlUYXNrcycpO1xuXHRcdGxldCBodG1sOiBzdHJpbmcsIG5ld0h0bWw6IHN0cmluZywgaHRtbERvbTtcblx0XHRodG1sID0gIGA8bGkgY2xhc3M9XCJ0ZF9fYm9keS10YXNrJHt0YXNrLnN0YXRlID09PSB0cnVlID8gJyB0ZF9fYm9keS10YXNrLS1jb21wbGV0ZScgOiAnJyB9XCIgaWQ9XCIke3Rhc2suaWR9XCIgZGF0YS1pZD1cIiR7dGFzay5pZH1cIj5cblx0XHRcdFx0XHQ8aW5wdXQgY2xhc3M9XCJ0ZF9fYm9keS10YXNrLS10b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIj5cblx0XHRcdFx0XHQ8c3Bhbj4ke3Rhc2submFtZX08L3NwYW4+XG5cdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cInRkX19ib2R5LXRhc2stLWRlc3Ryb3lcIiBkYXRhLWJ1dHRvbi1pZD1cIiR7dGFzay5pZH1cIj48aSBjbGFzcz1cIm1kaSBtZGktd2luZG93LWNsb3NlXCI+PC9pPjwvYnV0dG9uPlxuXHRcdFx0XHQ8L2xpPmBcblx0XHRcblx0XHRjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGh0bWwpO1xuXG5cdFx0bGV0IGZpbmRJZCA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pZD1cIiR7dGFzay5pZH1cIl1gKVxuXG5cdFx0aWYgKGZpbmRJZCkge1xuXHRcdFx0ZmluZElkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHR0aGlzLnRvZ2dsZVN0YXRlKHRhc2spO1xuXHRcdFx0XHRmaW5kSWQuY2xhc3NMaXN0LnRvZ2dsZSgndGRfX2JvZHktdGFzay0tY29tcGxldGUnKTtcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cdFxuXHRwcml2YXRlIGZpbmRJZCgpIHtcblx0XHRyZXR1cm4gdGhpcy50b2Rvcy5tYXAodG9kbyA9PiB0b2RvLmlkKTtcblx0fVxuXG5cdHJlbmRlcihpbnB1dDogc3RyaW5nKTogdm9pZHtcblx0XHRsZXQgbmV3SXRlbTtcblx0XHRuZXdJdGVtID0gdGhpcy5hZGRUYXNrKGlucHV0KTtcblx0XHRjb25zb2xlLmxvZyhuZXdJdGVtKTtcblxuXHRcdHRoaXMucmVuZGVyVGFzayhuZXdJdGVtKTtcblx0fVxuXG5cdHJlbmRlckZpbHRlciAodGFza3M6IFRvZG9bXSk6IHZvaWQge1xuXHRcdGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXNrcy5sZW5ndGg7IGluZGV4KyspIHtcblx0XHRcdGxldCBlbGVtZW50ID0gdGFza3NbaW5kZXhdO1xuXHRcdFx0dGhpcy5yZW5kZXJUYXNrRmlsdGVyKGVsZW1lbnQpO1xuXHRcdH1cblx0fVxuXG5cdGRlbGV0ZVRhc2sgKGluZGV4OiBzdHJpbmcpOiBUb2RvW117XG5cdFx0bGV0IGl0ZW0sIGlkcztcblxuXHRcdGlkcyA9IHRoaXMuZmluZElkKCk7XG5cdFx0aXRlbSA9IGlkcy5pbmRleE9mKGluZGV4KVxuXG5cdFx0aWYgKGl0ZW0gIT09IC0xKSB7XG5cdFx0XHR0aGlzLnRvZG9zLnNwbGljZShpdGVtLCAxKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy50b2Rvcztcblx0fVxuXG5cdGNsZWFyQ29tcGxldGVUYXNrKCkge1xuXHRcdHRoaXMudG9kb3MgPSB0aGlzLnRvZG9zLmZpbHRlcih0b2RvID0+IHRvZG8uc3RhdGUgPT09IHRydWUpO1xuXHR9XG5cblx0YWxsVGFzaygpIHtcblx0XHRyZXR1cm4gdGhpcy50b2Rvcy5zbGljZSgpO1xuXHR9XG5cblx0YWN0aXZlVGFzaygpIHtcblx0XHRyZXR1cm4gKHRoaXMudG9kb3MgPSB0aGlzLnRvZG9zLnNsaWNlKCkuZmlsdGVyKFxuXHRcdFx0dG9kbyA9PiB0b2RvLnN0YXRlID09PSBmYWxzZVxuXHRcdCkpO1xuXHR9XG5cblx0Y29tcGxldGVUYXNrKCkge1xuXHRcdHJldHVybiAodGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKFxuXHRcdFx0dG9kbyA9PiB0b2RvLnN0YXRlID09PSB0cnVlXG5cdFx0KSk7XG5cdH1cblxuXHRjb3VudFRhc2soY291bnRFbGVtZW50OiBIVE1MRWxlbWVudCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMudG9kb3MubGVuZ3RoID4gMCkge1xuXHRcdFx0Y291bnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb3VudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHR9XG5cdFx0cmV0dXJuIFN0cmluZyh0aGlzLnRvZG9zLmxlbmd0aCk7XG5cdH1cblxuXHR0b2dnbGVTdGF0ZSh0b2RvOiBUb2RvKTogYm9vbGVhbntcblx0XHR0b2RvLnN0YXRlID0gIXRvZG8uc3RhdGVcblx0XHRyZXR1cm4gdG9kby5zdGF0ZTtcblx0fVxufVxuIl19
